<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Book Your Stay | Aberfoyle Inn</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

 <link rel="shortcut icon" href="./favicon.png" type="image/x-icon">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">


    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="./webapps/css/style.css">
    <link rel="stylesheet" href="./webapps/css/booking.css">

<style>
:root {
  --green: #1f4f3b;
  --blue: #1fa2ff;
  --gold: #cfa670;
  --bg:#0b1220;
  --card:rgba(255,255,255,0.06);
  --accent:#c9a24d;
  --accent-soft:#e4c97a;
  --secondary:#3a4f7a;
  --text:#f8fafc;
  --muted:#cbd5e1;
}

* {
  box-sizing: border-box;
  font-family: 'Segoe UI', sans-serif;
}

body {
  margin: 0;
  background: linear-gradient(180deg, #0b1220, #0f1a2e);
  color: var(--text);
}

/* ---------- CONTAINER ---------- */
.booking-wrapper {
  /* max-width: 1100px; */
  margin: auto;
  padding: 180px 20px;
  background: radial-gradient(circle at 20% 20%, rgba(201, 162, 77, 0.12), transparent 40%), linear-gradient(135deg, rgba(11, 18, 32, 0.95), rgba(11, 18, 32, 0.75));
}

/* ---------- HEADER ---------- */
.booking-header {
  text-align: center;
  margin-bottom: 50px;
}

.booking-header h1 {
  font-size: 42px;
  margin-bottom: 10px;
}

.booking-header span {
  color: var(--accent);
}

.booking-header p {
  color: var(--muted);
  font-size: 18px;
}

/* ---------- CARD ---------- */
.booking-card {
  background: var(--card);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  backdrop-filter: blur(14px);
}

/* ---------- FORM ---------- */
.booking-form {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 25px;
}

.booking-form label {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 6px;
  display: block;
}

.booking-form input,
.booking-form select,
.booking-form textarea {
  width: 100%;
  padding: 14px 16px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  color: var(--text);
  font-size: 15px;
}

.booking-form input:focus,
.booking-form select:focus,
.booking-form textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(201,162,77,0.2);
}

.full {
  grid-column: span 2;
}

/* ---------- BUTTON ---------- */
.book-btn {
  grid-column: span 2;
  margin-top: 10px;
}

.book-btn button {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: none;
  background: linear-gradient(135deg, var(--accent), var(--gold));
  color: #0b1220;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.book-btn button:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 35px rgba(201,162,77,0.35);
}

/* ---------- INFO STRIP ---------- */
.info-strip {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
  padding-top: 25px;
  border-top: 1px solid rgba(255,255,255,0.12);
  color: var(--muted);
  font-size: 14px;
}

/* ---------- RESPONSIVE ---------- */
@media (max-width: 768px) {
  .booking-form {
    grid-template-columns: 1fr;
  }
  .full,
  .book-btn {
    grid-column: span 1;
  }
}

/* FIX DROPDOWN TEXT VISIBILITY */
.booking-form select {
  color: var(--text);
  background-color: rgba(255,255,255,0.06);
}

/* IMPORTANT: option styles */
.booking-form select option {
  color: #0b1220;          /* dark text */
  background: #ffffff;    /* white background */
}

</style>
</head>

<body>

  <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg fixed-top glass-nav">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#"> <img class="logo" src="./images/logo.png" alt="logo" srcset=""></a>
            <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="./index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="./index.html#rooms">Rooms</a></li>
                    <li class="nav-item"><a class="nav-link" href="./index.html#experiences">Experiences</a></li>
                    <li class="nav-item"><a class="nav-link" href="./index.html#bistro">Bistro</a></li>
                    <li class="nav-item"><a class="nav-link" href="./index.html#contact">Contact</a></li>
                    <li class="nav-item">
                        <a class="btn btn-book ms-lg-3" href="#">Book Now</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>   
    
    
    <section class="availability-section">
  <h2>Check Availability</h2>

  <form id="availabilityForm">
    <input type="date" id="checkin" required>
    <input type="date" id="checkout" required>

    <select id="guests">
      <option value="1">1 Guest</option>
      <option value="2">2 Guests</option>
      <option value="3">3 Guests</option>
    </select>

    <select id="roomType">
      <option value="Double Room">Double Room (Sleeps 2)</option>
      <option value="Twin Room">Twin Room (Sleeps 2)</option>
      <option value="Family Room">Family Room (Sleeps 3)</option>
    </select>

    <button type="submit">Check Availability</button>
  </form>

  <div id="availabilityResult"></div>

<button
  id="bookNowBtn"
  style="display:none; margin-top:12px;"
  class="btn btn-primary"
>
  Book Now & Pay 30% Deposit
</button>
</section>












<section class="booking-wrapper">
  <div class="container">
  <div class="booking-header">
    <h1>Book Your <span>Stay</span></h1>
    <p>Comfort, calm and countryside charm at Aberfoyle Inn</p>
  </div>

  <div class="booking-card">
     <form class="booking-form" onsubmit="sendToWhatsApp(event)">

  <div>
    <label>Full Name</label>
    <input type="text" id="name" placeholder="Your name" required>
  </div>

  <div>
    <label>Email Address</label>
    <input type="email" id="email" placeholder="you@example.com" required>
  </div>

  <div>
    <label>Check-in Date</label>
    <input type="date" id="checkin" required>
  </div>

  <div>
    <label>Check-out Date</label>
    <input type="date" id="checkout" required>
  </div>

  <div>
    <label>Guests</label>
    <select id="guests">
      <option>1 Guest</option>
      <option>2 Guests</option>
      <option>3 Guests</option>
      <option>4 Guests</option>
      <option>5 Guests</option>
      <option>6 Guests</option>
      <option>7 Guests</option>
      <option>8+ Guests</option>
    </select>
  </div>

  <div>
    <label>Room Type</label>
    <select id="room">
      <option>Standard Room</option>
      <option>Deluxe Room</option>
      <option>Family Room</option>
    </select>
  </div>

  <div class="full">
    <label>Special Requests</label>
    <textarea id="message" rows="4" placeholder="Any special requirements..."></textarea>
  </div>

  <div class="book-btn">
    <button type="submit">Confirm Booking</button>
  </div>

</form>


    <div class="info-strip">
      <div>‚úî Free Cancellation</div>
      <div>‚úî Best Price Guaranteed</div>
      <div>‚úî Secure Booking</div>
    </div>
  </div>
  </div>


</section>


 <!-- FOOTER -->
    <footer class="aber-footer">
        <div class="container">
            <div class="row gy-5">

                <!-- ABOUT -->
                <div class="col-lg-4">
                    <h4 class="footer-title">Aberfoyle Inn</h4>
                    <p class="footer-text">
                        A warm & welcoming Scottish inn in the heart of
                        <strong>Loch Lomond & The Trossachs National Park</strong>.
                        Your perfect base for adventure, relaxation & unforgettable stays.
                    </p>

                    <div class="footer-social">
                        <a href="https://www.facebook.com/share/167MVHhXAT/?mibextid=wwXIfr"><i class="bi bi-facebook"></i></a>
                        <a href="https://www.instagram.com/the_aberfoyleinn?igsh=MWd5M3BmdDhlOWM5Mw%3D%3D&utm_source=qr"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-google"></i></a>
                       
                    </div>
                </div>

                 <!-- QUICK LINKS -->
                <div class="col-lg-2 col-md-6">
                    <h5 class="footer-title-sm">Quick Links</h5>
                    <ul class="footer-links">
                        <li><a href="./index.html">Home</a></li>
                        <li><a href="./index.html#rooms">Rooms & Rates</a></li>
                        <li><a href="./index.html#gallery">Gallery</a></li>
                        <li><a href="./index.html#contact">Contact</a></li>
                    </ul>
                </div>

                <!-- EXPERIENCES -->
                <div class="col-lg-2 col-md-6">
                    <h5 class="footer-title-sm">Experiences</h5>
                    <ul class="footer-links">
                        <li><a href="./index.html#go-ape-section">Go Ape Aberfoyle</a></li>
                        <li><a href="./index.html#bistro">Bistro</a></li>
                        <li><a href="./index.html#experiences">Experiences</a></li>
                         <li><a href="./booknow.html">Book a Stay</a></li>
                       
                    </ul>
                </div>

                <!-- CONTACT -->
                <div class="col-lg-4">
                    <h5 class="footer-title-sm">Contact Us</h5>

                    <ul class="footer-contact">
                        <li>
                            <i class="bi bi-geo-alt-fill"></i>
                            16 Main Street, Aberfoyle,<br>
                            Stirling, FK8 3UG, Scotland
                        </li>
                        <li>
                            <i class="bi bi-telephone-fill"></i>
                            <a href="tel:+441877382573">+44 1877 382573</a>
                        </li>
                        <li>
                            <i class="bi bi-envelope-fill"></i>
                            <a href="mailto: booking@aberfoyleinn.uk ">
                                 booking@aberfoyleinn.uk 
                            </a>
                        </li>
                    </ul>

                </div>

            </div>
        </div>

        <!-- BOTTOM BAR -->
        <div class="footer-bottom">
            <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
                <p class="mb-2 mb-md-0">
                    ¬© 2025 Aberfoyle Inn. All Rights Reserved.
                </p>
                <p class="mb-0">
                    Designed with ‚ù§Ô∏è by
                    <a href="https://azenix.co.uk" target="_blank" rel="noopener noreferrer" class="footer-link">
                        Azenix
                    </a>
                </p>
            </div>
        </div>

    </footer>


    <script>
function sendToWhatsApp(event) {
  event.preventDefault();

  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const checkin = document.getElementById("checkin").value;
  const checkout = document.getElementById("checkout").value;
  const guests = document.getElementById("guests").value;
  const room = document.getElementById("room").value;
  const message = document.getElementById("message").value;

  const phoneNumber = "8848883130"; 
  // üëÜ REPLACE with your WhatsApp number (UK format, no +)

  const text = `
Hello Aberfoyle Inn üëã

I would like to make a booking.

Name: ${name}
Email: ${email}
Check-in: ${checkin}
Check-out: ${checkout}
Guests: ${guests}
Room Type: ${room}
Special Requests: ${message || "None"}
`;

  const encodedText = encodeURIComponent(text);
  const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedText}`;

  window.open(whatsappURL, "_blank");
}
</script>







<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs, query, where }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD4tq8K8uE_8pYUjML40CCbSgelfZ5498o",
  authDomain: "aberfoyle-inn.firebaseapp.com",
  projectId: "aberfoyle-inn",
  storageBucket: "aberfoyle-inn.firebasestorage.app",
  messagingSenderId: "34743961610",
  appId: "1:34743961610:web:5f0a701bd95d6ab790f7f3",
  measurementId: "G-CVB2CC4Y67"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // expose globally
  window.db = db;
  window.collection = collection;
  window.getDocs = getDocs;
  window.query = query;
  window.where = where;

  console.log("üî• Firebase connected");
</script>

<script>
let selectedBooking = null;

document
  .getElementById("availabilityForm")
  .addEventListener("submit", checkAvailability);

async function checkAvailability(e) {
  e.preventDefault();

  const checkIn = document.getElementById("checkin").value;
  const checkOut = document.getElementById("checkout").value;
  const guests = Number(document.getElementById("guests").value);
  const roomType = document.getElementById("roomType").value;

  const result = document.getElementById("availabilityResult");
  const bookBtn = document.getElementById("bookNowBtn");

  result.innerHTML = "Checking availability...";
  bookBtn.style.display = "none";

  try {
    // üîπ INVENTORY
    const inventorySnap = await getDocs(collection(db, "room_inventory"));

    let totalRooms = 0;
    let maxGuests = 0;

    inventorySnap.forEach(doc => {
      const data = doc.data();
      if (data.roomType === roomType) {
        totalRooms = data.totalRooms;
        maxGuests = data.maxGuests;
      }
    });

    if (!totalRooms) {
      result.innerHTML = "‚ö†Ô∏è Room data not found";
      result.style.color = "orange";
      return;
    }

    if (guests > maxGuests) {
      result.innerHTML = `‚ùå Max ${maxGuests} guests allowed for ${roomType}`;
      result.style.color = "red";
      return;
    }

    // üîπ BOOKINGS
    const bookingSnap = await getDocs(
      query(collection(db, "bookings"), where("roomType", "==", roomType))
    );

    let bookedRooms = 0;

    bookingSnap.forEach(doc => {
      const b = doc.data();
      if (checkIn < b.checkOut && checkOut > b.checkIn) {
        bookedRooms += b.roomsBooked;
      }
    });

    const available = totalRooms - bookedRooms;

    if (available > 0) {
      result.innerHTML = `‚úÖ <strong>${available}</strong> ${roomType}(s) available`;
      result.style.color = "green";

      // üëâ SAVE SELECTION FOR NEXT STEP
      selectedBooking = {
        roomType,
        checkIn,
        checkOut,
        guests
      };

      // üëâ SHOW BOOK BUTTON
      bookBtn.style.display = "inline-block";

    } else {
      result.innerHTML = `‚ùå No ${roomType} available for selected dates`;
      result.style.color = "red";
    }

  } catch (err) {
    console.error(err);
    result.innerHTML = "‚ö†Ô∏è Error checking availability";
    result.style.color = "orange";
  }
}
</script>

<script>
document.getElementById("bookNowBtn").addEventListener("click", () => {
  console.log("Booking ready:", selectedBooking);
  alert(
    `Proceeding to payment for:\n\n${selectedBooking.roomType}\n${selectedBooking.checkIn} ‚Üí ${selectedBooking.checkOut}\nGuests: ${selectedBooking.guests}`
  );
});
</script>




</body>
</html>
